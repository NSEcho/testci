diff --git a/src/compiler/build-backend.py b/src/compiler/build-backend.py
index a43a11b2..1537b486 100644
--- a/src/compiler/build-backend.py
+++ b/src/compiler/build-backend.py
@@ -119,7 +119,8 @@ def build_backend(
                 check=True,
             )
 
-            run(priv_dir / symbol_replacer.name, backend_a.name, *config["nm"], *config["ranlib"])
+            pr = run(priv_dir / symbol_replacer.name, backend_a.name, *config["nm"], *config["ranlib"])
+            print("pr", pr.stdout)
 
         if (mingw := config.get("mingw")) is not None and (abi := config["abi"]) in {
             "x86",
diff --git a/src/compiler/symbol-replacer/main.go b/src/compiler/symbol-replacer/main.go
index 5c52cff9..65bbd838 100644
--- a/src/compiler/symbol-replacer/main.go
+++ b/src/compiler/symbol-replacer/main.go
@@ -2,6 +2,7 @@ package main
 
 import (
 	"bytes"
+	"fmt"
 	"io"
 	"os"
 	"os/exec"
@@ -10,7 +11,7 @@ import (
 
 var (
 	excludeSymbols = [][]byte{
-		[]byte("frida"),
+		[]byte("fprintf"),
 		[]byte("pthread"),
 		[]byte("st0_"),
 		[]byte("rt0_"),
@@ -41,6 +42,7 @@ func main() {
 				symbol := splitted[2]
 				symbolLower := bytes.ToLower(symbol)
 				if symbolIsOkay(symbolLower) {
+					fmt.Println("inserting", string(symbol))
 					t.insert(symbol, flipAlpha(symbol))
 				}
 			}
@@ -57,6 +59,7 @@ func main() {
 
 	for i := 0; i < len(data); {
 		if l, replacement, ok := t.search(data, i); ok {
+			fmt.Println("replacement is", string(replacement))
 			copy(modifiedData[i:], replacement)
 			i += l
 		} else {
@@ -100,10 +103,19 @@ func flipAlpha(s []byte) []byte {
 }
 
 func symbolIsOkay(symbol []byte) bool {
-	for _, s := range excludeSymbols {
-		if bytes.Contains(symbol, s) {
-			return false
+	switch {
+	case bytes.Contains(symbol, []byte("frida")):
+		return false
+	case bytes.Contains(symbol, []byte("cgo")):
+		return true
+	case bytes.ContainsAny(symbol, "./"):
+		return true
+	default:
+		for _, s := range excludeSymbols {
+			if bytes.Contains(symbol, s) {
+				return false
+			}
 		}
+		return true
 	}
-	return true
 }
